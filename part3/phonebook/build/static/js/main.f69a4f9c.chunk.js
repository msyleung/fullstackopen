(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{15:function(e,n,t){e.exports=t(37)},37:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),c=t(14),u=t.n(c),o=(t(5),t(2)),l=function(e){var n=e.persons,t=e.handleDelete;return r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,r.a.createElement("h2",null,"Numbers")))),r.a.createElement("tbody",null,n.map((function(e){return r.a.createElement("tr",{key:e.id,className:"row"},r.a.createElement("td",null,e.name),r.a.createElement("td",null,e.number),r.a.createElement("td",null,r.a.createElement("button",{onClick:t,id:e.id,name:e.name},"delete")))}))))},i=function(e){var n=e.newName,t=e.newNumber,a=e.handleChange,c=e.handleSubmit;return r.a.createElement("div",{className:"newEntry"},r.a.createElement("h2",null,"Add a new entry:"),r.a.createElement("form",{onSubmit:c,className:"entryForm"},r.a.createElement("div",null,"name: ",r.a.createElement("input",{value:n,onChange:a,id:"name"})),r.a.createElement("div",null,"number:"," ",r.a.createElement("input",{value:t,onChange:a,id:"number"})),r.a.createElement("div",null,r.a.createElement("button",{type:"submit"},"save"))))},m=function(e){var n=e.message,t=e.setMessage;setTimeout((function(){t(null)}),3e3);var a=n.includes("Error")?"notification error":"notification";return r.a.createElement("div",{className:a},n)},s=function(e){var n=e.search,t=e.handleChange;return r.a.createElement("div",{className:"search"},"Search: ",r.a.createElement("input",{value:n,onChange:t,id:"search"}))},d=t(3),h=t.n(d),b="/api/persons",f=function(){return h.a.get(b).then((function(e){return e.data}))},E=function(e){return h.a.post(b,e).then((function(e){return e.data}))},v=function(e,n){return h.a.put("".concat(b,"/").concat(e),n).then((function(e){return e.data}))},p=function(e){return h.a.delete("".concat(b,"/").concat(e)).then((function(e){return e.data}))},w=function(){var e=Object(a.useState)([]),n=Object(o.a)(e,2),t=n[0],c=n[1],u=Object(a.useState)(t),d=Object(o.a)(u,2),h=d[0],b=d[1],w=Object(a.useState)(""),g=Object(o.a)(w,2),j=g[0],O=g[1],k=Object(a.useState)(""),N=Object(o.a)(k,2),y=N[0],C=N[1],S=Object(a.useState)(""),D=Object(o.a)(S,2),J=D[0],L=D[1],M=Object(a.useState)(""),x=Object(o.a)(M,2),A=x[0],B=x[1],F=function(){f().then((function(e){return c(e)}))};Object(a.useEffect)((function(){F()}),[]),Object(a.useEffect)((function(){b(t)}),[t]),Object(a.useEffect)((function(){if(!j)return b(t);var e=t.filter((function(e){return e.name.toLowerCase().includes(j.toLowerCase())}));b(e)}),[j,t]);var I=function(e){var n=e.target,t=n.id,a=n.value;switch(t){case"name":L(a);break;case"number":C(a);break;case"search":O(a);break;default:console.log("???")}};return r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"navbar"},r.a.createElement("h1",null,"Phonebook"),r.a.createElement(s,{search:j,handleChange:I})),A&&r.a.createElement(m,{message:A,setMessage:B}),r.a.createElement(i,{newName:J,newNumber:y,handleChange:I,handleSubmit:function(e){e.preventDefault();var n={id:t.length+1,name:J,number:y},a=t.find((function(e){return e.name===n.name}));a?function(e,n){var t=e.number,a=e.name,r=e.id;t===n.number?window.alert("".concat(a," is already added to the phonebook!")):window.confirm("".concat(a," is already added to the phonebook, replace the old number with the new one?"))&&(v(r,n).then((function(){return F()})),B("".concat(a," has been updated!")))}(a,n):E(n).then((function(e){c(t.concat(e)),B("".concat(e.name," has been added to the phonebook!"))})),L(""),C("")}}),r.a.createElement(l,{persons:h,handleDelete:function(e){var n=e.target,t=n.id,a=n.name;window.confirm("Delete ".concat(a,"?"))&&p(t).then((function(){F()})).catch((function(){B("Error: ".concat(a," has already been deleted"))}))}}))};u.a.render(r.a.createElement(w,null),document.getElementById("root"))},5:function(e,n,t){}},[[15,1,2]]]);
//# sourceMappingURL=main.f69a4f9c.chunk.js.map